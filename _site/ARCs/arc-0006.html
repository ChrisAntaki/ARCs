<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
    <title>ARC-6: Algorand Wallet Address Discovery API</title>
    <meta property="og:title" content="ARC-6: Algorand Wallet Address Discovery API" />
    <meta name="description" content="" />
    <meta property="og:description" content="" />
    <meta name="twitter:description" content="" />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ARCs/arc-0006" />
  <meta property="og:url" content="http://localhost:4000/ARCs/arc-0006" />
  <meta property="og:site_name" content="Algorand Requests for Comments" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Algorand Requests for Comments",
      "description": "To discuss ARC drafts, use the corresponding issue in the issue tracker.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Algorand Requests for Comments" /><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Algorand Requests for Comments</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/all">All</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        
  <div class="draft">
    ⚠️ This ARC is not recommended for general use or implementation as it is likely to change.
  </div>


<div class="home">
  <h1 class="page-heading">
    ARC-6: Algorand Wallet Address Discovery API
    <a href="https://github.com/lifecoder1988/ARCs/blob/master/ARCs/arc-0006.md"><svg role="img" aria-label="Source" xmlns="https://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><title>Source</title><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg></a>
  </h1>
  <h3></h3>
  <table>
    <tr><th>Author</th><td></td></tr>
    
    <tr><th>Status</th><td>Draft
    
    </td></tr>
    <tr><th>Type</th><td></td></tr>
    
    <tr><th>Created</th><td></td></tr>
    
    
    
  </table>

  <div class="toc">
    <h2>Table of Contents</h2>
    <ul>
  <li><a href="#algorand-wallet-address-discovery-api">Algorand Wallet Address Discovery API</a>
    <ul>
      <li><a href="#summary">Summary</a></li>
      <li><a href="#abstract">Abstract</a></li>
      <li><a href="#specification">Specification</a>
        <ul>
          <li><a href="#interface-enablefunction">Interface EnableFunction</a></li>
          <li><a href="#string-specification-genesisid-and-genesishash">String specification: GenesisID and GenesisHash</a></li>
          <li><a href="#string-specification-algorandaddress">String specification: AlgorandAddress</a></li>
          <li><a href="#error-standards">Error Standards</a></li>
          <li><a href="#semantic-requirements">Semantic requirements</a></li>
        </ul>
      </li>
      <li><a href="#rationale">Rationale</a></li>
      <li><a href="#copyright">Copyright</a></li>
    </ul>
  </li>
</ul>

  </div>

  <h1 id="algorand-wallet-address-discovery-api">
      
      
        <a href="#algorand-wallet-address-discovery-api" class="anchor-link"></a> Algorand Wallet Address Discovery API
      
      
    </h1>

<blockquote>
  <p>This API is a draft.
Some elements may change.</p>
</blockquote>
  
    <h2 id="summary">
      
      
        <a href="#summary" class="anchor-link"></a> Summary
      
      
    </h2>

<p>An API for a function used to discover the addresses a wallet user is willing to use for a given Algorand DApp.</p>
  
    <h2 id="abstract">
      
      
        <a href="#abstract" class="anchor-link"></a> Abstract
      
      
    </h2>

<p>A function, <code class="language-plaintext highlighter-rouge">enable</code>, which allows the discovery of accounts. 
This document requires nothing else, but further semantic meaning is prescribed to <code class="language-plaintext highlighter-rouge">enable</code> in <a href="/ARCs/arc-0010">ARC-0010</a> which builds off of this one and a few others.
The caller of this function is usually a dApp.</p>
  
    <h2 id="specification">
      
      
        <a href="#specification" class="anchor-link"></a> Specification
      
      
    </h2>

<p>The key words “<strong>MUST</strong>”, “<strong>MUST NOT</strong>”, “<strong>REQUIRED</strong>”, “<strong>SHALL</strong>”, “<strong>SHALL NOT</strong>”, “<strong>SHOULD</strong>”, “<strong>SHOULD NOT</strong>”, “<strong>RECOMMENDED</strong>”, “<strong>MAY</strong>”, and “<strong>OPTIONAL</strong>” in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC-2119</a>.</p>

<blockquote>
  <p>Comments like this are non-normative.</p>
</blockquote>
  
    <h3 id="interface-enablefunction">
      
      
        <a href="#interface-enablefunction" class="anchor-link"></a> Interface <code class="language-plaintext highlighter-rouge">EnableFunction</code>
      
      
    </h3>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="nx">type</span> <span class="nx">AlgorandAddress</span> <span class="o">=</span> <span class="nx">string</span><span class="p">;</span>
<span class="k">export</span> <span class="nx">type</span> <span class="nx">GenesisHash</span> <span class="o">=</span> <span class="nx">string</span><span class="p">;</span>

<span class="k">export</span> <span class="nx">type</span> <span class="nx">EnableFunction</span> <span class="o">=</span> <span class="p">(</span>
  <span class="nx">opts</span><span class="p">?:</span> <span class="nx">EnableOpts</span>
<span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">EnableResult</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">EnableOpts</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">genesisID</span><span class="p">?:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">genesisHash</span><span class="p">?:</span> <span class="nx">GenesisHash</span><span class="p">;</span>
  <span class="nl">accounts</span><span class="p">?:</span> <span class="nx">AlgorandAddress</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">EnableResult</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">genesisID</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">genesisHash</span><span class="p">:</span> <span class="nx">GenesisHash</span><span class="p">;</span>
  <span class="nl">accounts</span><span class="p">:</span> <span class="nx">AlgorandAddress</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">EnableError</span> <span class="kd">extends</span> <span class="nb">Error</span> <span class="p">{</span>
  <span class="na">code</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">?:</span> <span class="nx">any</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>An <code class="language-plaintext highlighter-rouge">EnableFunction</code> with optional input argument <code class="language-plaintext highlighter-rouge">opts:EnableOpts</code> <strong>MUST</strong> return a value <code class="language-plaintext highlighter-rouge">ret:EnableResult</code> or <strong>MUST</strong> throw an exception object of type <code class="language-plaintext highlighter-rouge">EnableError</code>.</p>
  
    <h3 id="string-specification-genesisid-and-genesishash">
      
      
        <a href="#string-specification-genesisid-and-genesishash" class="anchor-link"></a> String specification: <code class="language-plaintext highlighter-rouge">GenesisID</code> and <code class="language-plaintext highlighter-rouge">GenesisHash</code>
      
      
    </h3>

<p>A <code class="language-plaintext highlighter-rouge">GenesisID</code> is an ascii string</p>

<p>A <code class="language-plaintext highlighter-rouge">GenesisHash</code> is base64 string representing a 32-byte genesis hash.</p>
  
    <h3 id="string-specification-algorandaddress">
      
      
        <a href="#string-specification-algorandaddress" class="anchor-link"></a> String specification: <code class="language-plaintext highlighter-rouge">AlgorandAddress</code>
      
      
    </h3>

<p>Defined as in <a href="/ARCs/arc-0001">ARC-0001</a>:</p>

<blockquote>
  <p>An Algorand address is represented by a 58-character base32 string. It includes includes the checksum.</p>
</blockquote>
  
    <h3 id="error-standards">
      
      
        <a href="#error-standards" class="anchor-link"></a> Error Standards
      
      
    </h3>

<p><code class="language-plaintext highlighter-rouge">EnableError</code> follows the same rules as <code class="language-plaintext highlighter-rouge">SignTxnsError</code> from <a href="/ARCs/arc-0001">ARC-0001</a> and uses the same status error codes.</p>
  
    <h3 id="semantic-requirements">
      
      
        <a href="#semantic-requirements" class="anchor-link"></a> Semantic requirements
      
      
    </h3>

<p>This ARC uses interchangeably the terms “throw an error” and “reject a promise with an error”.</p>
  
    <h4 id="first-call-to-enable">
      
      
        <a href="#first-call-to-enable" class="anchor-link"></a> First call to <code class="language-plaintext highlighter-rouge">enable</code>
      
      
    </h4>

<p>Regarding a first call by a caller to <code class="language-plaintext highlighter-rouge">enable(opts)</code> or <code class="language-plaintext highlighter-rouge">enable()</code> (where <code class="language-plaintext highlighter-rouge">opts</code> is <code class="language-plaintext highlighter-rouge">undefined</code>), with potential promised return value <code class="language-plaintext highlighter-rouge">ret</code>:</p>

<p>When <code class="language-plaintext highlighter-rouge">genesisID</code> and/or <code class="language-plaintext highlighter-rouge">genesisHash</code> is specified in <code class="language-plaintext highlighter-rouge">opts</code>:</p>

<ul>
  <li>The call <code class="language-plaintext highlighter-rouge">enable(opts)</code> <strong>MUST</strong> either throw an error or return an object <code class="language-plaintext highlighter-rouge">ret</code> where <code class="language-plaintext highlighter-rouge">ret.genesisID</code> and <code class="language-plaintext highlighter-rouge">ret.genesisHash</code> match <code class="language-plaintext highlighter-rouge">opts.genesisID</code> and <code class="language-plaintext highlighter-rouge">opts.genesisHash</code> (i.e., <code class="language-plaintext highlighter-rouge">ret.genesisID</code> is identical to <code class="language-plaintext highlighter-rouge">opts.genesisID</code> if <code class="language-plaintext highlighter-rouge">opts.genesisID</code> is specified, and <code class="language-plaintext highlighter-rouge">ret.genesisHash</code> is idential to <code class="language-plaintext highlighter-rouge">opts.genesisHash</code> if <code class="language-plaintext highlighter-rouge">opts.genesisHash</code> is sepcified).</li>
  <li>The user <strong>SHOULD</strong> be prompted for permission to acknowledge control of accounts on that specific network (defined by <code class="language-plaintext highlighter-rouge">ret.genesisID</code> and <code class="language-plaintext highlighter-rouge">ret.genesisHash</code>).</li>
  <li>In the case only <code class="language-plaintext highlighter-rouge">opts.genesisID</code> is provided, several networks may match this ID and the user <strong>SHOULD</strong> be prompted to select the network they wish to use.</li>
</ul>

<p>When neither <code class="language-plaintext highlighter-rouge">genesisID</code> nor <code class="language-plaintext highlighter-rouge">genesisHash</code> is specified in <code class="language-plaintext highlighter-rouge">opts</code>:</p>

<ul>
  <li>The user <strong>SHOULD</strong> be prompted to select the network they wish to use.</li>
  <li>The call <code class="language-plaintext highlighter-rouge">enable(opts)</code> <strong>MUST</strong> either throw an error or return an object <code class="language-plaintext highlighter-rouge">ret</code> where <code class="language-plaintext highlighter-rouge">ret.genesisID</code> and <code class="language-plaintext highlighter-rouge">ret.genesisHash</code> <strong>SHOULD</strong> represent the user’s selection of network.</li>
  <li>The function <strong>MAY</strong> throw an error if it does not support user selection of network.</li>
</ul>

<p>When <code class="language-plaintext highlighter-rouge">accounts</code> is specified in <code class="language-plaintext highlighter-rouge">opts</code>:</p>

<ul>
  <li>The call <code class="language-plaintext highlighter-rouge">enable(opts)</code> <strong>MUST</strong> either throw an error or return an object <code class="language-plaintext highlighter-rouge">ret</code> where <code class="language-plaintext highlighter-rouge">ret.accounts</code> is an array that starts with all the same elements as <code class="language-plaintext highlighter-rouge">opts.accounts</code>, in the same order.</li>
  <li>The user <strong>SHOULD</strong> be prompted for permission to acknowledge their control of the specified accounts. The wallet <strong>MAY</strong> allow the user to provide more accounts than those listed.</li>
</ul>

<p>When <code class="language-plaintext highlighter-rouge">accounts</code> is not specified in <code class="language-plaintext highlighter-rouge">opts</code>:</p>

<ul>
  <li>The user <strong>SHOULD</strong> be prompted to select the accounts they wish to reveal on the selected network.</li>
  <li>The call <code class="language-plaintext highlighter-rouge">enable(opts)</code> <strong>MUST</strong> either throw an error or return an object <code class="language-plaintext highlighter-rouge">ret</code> where <code class="language-plaintext highlighter-rouge">ret.accounts</code> is a empty or non-empty array.</li>
  <li>If <code class="language-plaintext highlighter-rouge">ret.accounts</code> is not empty, the caller <strong>MAY</strong> assume that <code class="language-plaintext highlighter-rouge">ret.accounts[0]</code> is the user’s “currently-selected” or “default” account, for DApps that only require access to one account.</li>
</ul>

<blockquote>
  <p>Empty <code class="language-plaintext highlighter-rouge">ret.accounts</code> array are used to allow a DApp to get access to an Algorand node but not to signing capabilities.</p>
</blockquote>
  
    <h4 id="network">
      
      
        <a href="#network" class="anchor-link"></a> Network
      
      
    </h4>

<p>In addition to the above rules, in all cases, if <code class="language-plaintext highlighter-rouge">ret.genesisID</code> is one of the official network <code class="language-plaintext highlighter-rouge">mainnet-v1.0</code>, <code class="language-plaintext highlighter-rouge">testnet-v1.0</code>, or <code class="language-plaintext highlighter-rouge">betanet-v1.0</code>, <code class="language-plaintext highlighter-rouge">ret.genesisHash</code> <strong>MUST</strong> match the genesis hash of those networks</p>

<table>
  <thead>
    <tr>
      <th>Genesis ID</th>
      <th>Genesis Hash</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mainnet-v1.0</code></td>
      <td><code class="language-plaintext highlighter-rouge">wGHE2Pwdvd7S12BL5FaOP20EGYesN73ktiC1qzkkit8=</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">testnet-v1.0</code></td>
      <td><code class="language-plaintext highlighter-rouge">SGO1GKSzyE7IEPItTxCByw9x8FmnrCDexi9/cOUJOiI=</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">betanet-v1.0</code></td>
      <td><code class="language-plaintext highlighter-rouge">mFgazF+2uRS1tMiL9dsj01hJGySEmPN28B/TjjvpVW0=</code></td>
    </tr>
  </tbody>
</table>

<p>When using a genesis ID that is not one of the above, the caller <strong>SHOULD</strong> always provide a <code class="language-plaintext highlighter-rouge">genesisHash</code>.
This is because a <code class="language-plaintext highlighter-rouge">genesisID</code> does not uniquely define a network in that case.
If a caller does not provide a <code class="language-plaintext highlighter-rouge">genesisHash</code>, multiple calls to <code class="language-plaintext highlighter-rouge">enable</code> may return a different network with the same <code class="language-plaintext highlighter-rouge">genesisID</code> but a different <code class="language-plaintext highlighter-rouge">genesisHash</code>.</p>
  
    <h4 id="identification-of-the-caller">
      
      
        <a href="#identification-of-the-caller" class="anchor-link"></a> Identification of the caller
      
      
    </h4>

<p>The <code class="language-plaintext highlighter-rouge">enable</code> function <strong>MAY</strong> remember the choices of the user made by a specific caller and use them everytime the same caller calls the function.
The function <strong>MUST</strong> ensure that the caller can be securely identified.
In particular, by default, the function <strong>MUST NOT</strong> allow webapps on the http protocol to call it, as such webapps can easily be modified by a man-in-the-middle attacker.
In the case of callers that are https websites, the caller <strong>SHOULD</strong> be identified by its fully qualified domain name.</p>

<p>The function <strong>MAY</strong> offer the user some “developer mode” or “advanced” options to allow calls from insecure dApps.
In that case, the fact that the caller is insecure and/or the fact that the wallet in in “developer mode” <strong>MUST</strong> be clearly displayed by the wallet.</p>
  
    <h4 id="multiple-calls-to-enable">
      
      
        <a href="#multiple-calls-to-enable" class="anchor-link"></a> Multiple calls to <code class="language-plaintext highlighter-rouge">enable</code>
      
      
    </h4>

<p>The same caller <strong>MAY</strong> call multiple time the <code class="language-plaintext highlighter-rouge">enable</code> function.
When the caller is a dApp, every time a dApp is refreshed, it actually <strong>SHOULD</strong> call the <code class="language-plaintext highlighter-rouge">enable()</code> function.</p>

<p>The <code class="language-plaintext highlighter-rouge">enable</code> function <strong>MAY NOT</strong> return the same value every time it is called, even when called with the exact same argument <code class="language-plaintext highlighter-rouge">opts</code>.
The caller <strong>MUST NOT</strong> assume that the <code class="language-plaintext highlighter-rouge">enable</code> function will return always the same value and <strong>MUST</strong> properly handle changes of available accounts and/or changes of network.</p>

<p>For example, a user may want to change network or accounts for a dApp.
That is why, upon refresh, the dApp <strong>SHOULD</strong> automatically switch network and perform all required changes.
Examples of required changes include but are not limited to change of the list of accounts, change of statuses of the account (e.g., opted in or not), change of the balances of the accounts.</p>
  
    <h2 id="rationale">
      
      
        <a href="#rationale" class="anchor-link"></a> Rationale
      
      
    </h2>

<p>This API puts power in the user’s hands to choose a preferred network and account to use when interacting with a dApp.</p>

<p>It also allows dApp developers to suggest a specific network, or specific accounts, as appropriate. 
The user still maintains the ability to reject the dApp’s suggestions, which corresponds to rejecting the promise returned by <code class="language-plaintext highlighter-rouge">enable()</code>.</p>
  
    <h2 id="copyright">
      
      
        <a href="#copyright" class="anchor-link"></a> Copyright
      
      
    </h2>

<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>

  <h2>Citation</h2>
  <p>Please cite this document as:</p>
  
  <p>, "ARC-6: Algorand Wallet Address Discovery API [DRAFT]," <em>Ethereum Improvement Proposals</em>, no. 6, . [Online serial]. Available: https://algorandfoundation.github.io/ARCS/arc-6.</p>
</div>

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "TechArticle",
    "headline": "ARC-6: Algorand Wallet Address Discovery API [DRAFT]",
    "author": "",
    "name": "ARC-6: Algorand Wallet Address Discovery API [DRAFT]",
    "dateCreated": "",
    "datePublished": "",
    
    "inLanguage": "en-US",
    "license": "#copyright",
    "copyrightYear": ""
  }
</script>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Algorand Requests for Comments</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Algorand Requests for Comments</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/algorandfoundation/ARCs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">algorandfoundation/ARCs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>To discuss ARC drafts, use the corresponding issue in the issue tracker.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
