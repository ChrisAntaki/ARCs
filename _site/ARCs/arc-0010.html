<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
    <title>ARC-10: Algorand Wallet Reach Minimum Requirements</title>
    <meta property="og:title" content="ARC-10: Algorand Wallet Reach Minimum Requirements" />
    <meta name="description" content="" />
    <meta property="og:description" content="" />
    <meta name="twitter:description" content="" />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ARCs/arc-0010" />
  <meta property="og:url" content="http://localhost:4000/ARCs/arc-0010" />
  <meta property="og:site_name" content="Algorand Requests for Comments" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Algorand Requests for Comments",
      "description": "To discuss ARC drafts, use the corresponding issue in the issue tracker.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Algorand Requests for Comments" /><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Algorand Requests for Comments</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/all">All</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        
  <div class="draft">
    ⚠️ This ARC is not recommended for general use or implementation as it is likely to change.
  </div>


<div class="home">
  <h1 class="page-heading">
    ARC-10: Algorand Wallet Reach Minimum Requirements
    <a href="https://github.com/lifecoder1988/ARCs/blob/master/ARCs/arc-0010.md"><svg role="img" aria-label="Source" xmlns="https://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><title>Source</title><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg></a>
  </h1>
  <h3></h3>
  <table>
    <tr><th>Author</th><td></td></tr>
    
    <tr><th>Status</th><td>Draft
    
    </td></tr>
    <tr><th>Type</th><td></td></tr>
    
    <tr><th>Created</th><td></td></tr>
    
    
    
  </table>

  <div class="toc">
    <h2>Table of Contents</h2>
    <ul>
  <li><a href="#algorand-wallet-reach-minimum-requirements">Algorand Wallet Reach Minimum Requirements</a>
    <ul>
      <li><a href="#summary">Summary</a></li>
      <li><a href="#abstract">Abstract</a></li>
      <li><a href="#specification">Specification</a>
        <ul>
          <li><a href="#semantic-requirements">Semantic Requirements</a></li>
          <li><a href="#additional-requirements-regarding-logicsigs">Additional requirements regarding LogicSigs</a></li>
        </ul>
      </li>
      <li><a href="#rationale">Rationale</a></li>
      <li><a href="#sample-usage">Sample usage</a></li>
      <li><a href="#copyright">Copyright</a></li>
    </ul>
  </li>
</ul>

  </div>

  <h1 id="algorand-wallet-reach-minimum-requirements">
      
      
        <a href="#algorand-wallet-reach-minimum-requirements" class="anchor-link"></a> Algorand Wallet Reach Minimum Requirements
      
      
    </h1>

<blockquote>
  <p>This API is a draft.
Some elements may change.</p>
</blockquote>
  
    <h2 id="summary">
      
      
        <a href="#summary" class="anchor-link"></a> Summary
      
      
    </h2>

<p>An amalgamation of APIs which comprise the minimum requirements for Reach to be able to function correctly with a given wallet.</p>
  
    <h2 id="abstract">
      
      
        <a href="#abstract" class="anchor-link"></a> Abstract
      
      
    </h2>

<p>A group of related functions:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">enable</code> (<strong>REQUIRED</strong>)</li>
  <li><code class="language-plaintext highlighter-rouge">signAndPostTxns</code> (<strong>REQUIRED</strong>)</li>
  <li><code class="language-plaintext highlighter-rouge">getAlgodv2Client</code> (<strong>REQUIRED</strong>)</li>
  <li><code class="language-plaintext highlighter-rouge">getIndexerClient</code> (<strong>REQUIRED</strong>)</li>
  <li><code class="language-plaintext highlighter-rouge">signTxns</code> (<strong>OPTIONAL</strong>)</li>
  <li><code class="language-plaintext highlighter-rouge">postTxns</code> (<strong>OPTIONAL</strong>)</li>
</ul>
  
    <h2 id="specification">
      
      
        <a href="#specification" class="anchor-link"></a> Specification
      
      
    </h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">enable</code>: as specified in <a href="/ARCs/arc-0006">ARC-0006</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">signAndPostTxns</code>: as specified in <a href="/ARCs/arc-0008">ARC-0008</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">getAlgodv2Client</code> and <code class="language-plaintext highlighter-rouge">getIndexerClient</code>: as specified in <a href="/ARCs/arc-0009">ARC-0009</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">signTxns</code>: as specified in <a href="/ARCs/arc-0005">ARC-0005</a> / <a href="/ARCs/arc-0001">ARC-0001</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">postTxns</code>: as specified in <a href="/ARCs/arc-0007">ARC-0007</a>.</li>
</ul>

<p>There are additional semantics for using these functions together.</p>
  
    <h3 id="semantic-requirements">
      
      
        <a href="#semantic-requirements" class="anchor-link"></a> Semantic Requirements
      
      
    </h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">enable</code> <strong>SHOULD</strong> be called before calling the other functions and upon refresh of the dApp.</li>
  <li>If <code class="language-plaintext highlighter-rouge">signAndPostTxns</code>, <code class="language-plaintext highlighter-rouge">getAlgodv2Client</code>, <code class="language-plaintext highlighter-rouge">getIndexerClient</code>, <code class="language-plaintext highlighter-rouge">signTxns</code>, or <code class="language-plaintext highlighter-rouge">postTxns</code> are called before <code class="language-plaintext highlighter-rouge">enable</code>, they <strong>SHOULD</strong> throw an error object with property <code class="language-plaintext highlighter-rouge">code=4202</code>. (See Error Standards in <a href="/ARCs/arc-0001">ARC-0001</a>).</li>
  <li><code class="language-plaintext highlighter-rouge">getAlgodv2Client</code> and <code class="language-plaintext highlighter-rouge">getIndexerClient</code> <strong>MUST</strong> return connections to the network indicated by the <code class="language-plaintext highlighter-rouge">network</code> result of <code class="language-plaintext highlighter-rouge">enable</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">signAndPostTxns</code> <strong>MUST</strong> post transactions to the network indicated by the <code class="language-plaintext highlighter-rouge">network</code> result of <code class="language-plaintext highlighter-rouge">enable</code></li>
  <li>The result of <code class="language-plaintext highlighter-rouge">getAlgodv2Client</code> <strong>SHOULD</strong> only be used to query the network. <code class="language-plaintext highlighter-rouge">postTxns</code> (if available) and <code class="language-plaintext highlighter-rouge">signAndPostTxns</code> <strong>SHOULD</strong> be used to send transactions to the network. The <code class="language-plaintext highlighter-rouge">Algodv2Client</code> object <strong>MAY</strong> be modified to throw exceptions if the caller tries to use it to post transactions.</li>
  <li><code class="language-plaintext highlighter-rouge">signTxns</code> and <code class="language-plaintext highlighter-rouge">postTxns</code> <strong>MAY</strong> or <strong>MAY NOT</strong> be provided. When one is provided, they both <strong>MUST</strong> be provided. In addition, <code class="language-plaintext highlighter-rouge">signTxns</code> <strong>MAY</strong> display a warning that the transactions are returned to the dApp rather than posted directly to the blockchain.</li>
</ul>
  
    <h3 id="additional-requirements-regarding-logicsigs">
      
      
        <a href="#additional-requirements-regarding-logicsigs" class="anchor-link"></a> Additional requirements regarding LogicSigs
      
      
    </h3>

<p><code class="language-plaintext highlighter-rouge">signAndPostTxns</code> must also be able to handle logic sigs, and more generally transactions signed by the DApp itself. 
In case of logic sigs, callers are expected to sign the logic sig by themselves, rather than expecting the wallet to do so on their behalf. 
To handle these cases, we adopt and extend the <a href="/ARCs/arc-0001">ARC-0001</a> format for <code class="language-plaintext highlighter-rouge">WalletTransaction</code>s that do not need to be signed:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"txn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"signers"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"stxn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">stxn</code> is a <code class="language-plaintext highlighter-rouge">SignedTxnStr</code>, as specified in <a href="/ARCs/arc-0007">ARC-0007</a>.</li>
  <li>For production wallets, <code class="language-plaintext highlighter-rouge">stxn</code> <strong>MUST</strong> be checked to match <code class="language-plaintext highlighter-rouge">txn</code>, as specified in <a href="/ARCs/arc-0001">ARC-0001</a>.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">signAndPostTxns</code> <strong>MAY</strong> reject when none of the transactions need to be signed by the user.</p>
  
    <h2 id="rationale">
      
      
        <a href="#rationale" class="anchor-link"></a> Rationale
      
      
    </h2>

<p>In order for a wallet to be useable by a DApp, it must support features for account discovery, signing and posting transactions, and querying the network.</p>

<p>To whatever extent possible, the end users of a DApp should be empowered to select their own wallet, accounts, and network to be used with the DApp. 
Furthermore, said users should be able to use their preferred network node connection, without exposing their connection details and secrets (such as endpoint URLs and API tokens) to the DApp.</p>

<p>The APIs presented in this document and related documents are sufficient to cover the needed functionality, while protecting user choice and remaining compatible with best security practices.
Most DApps indeed always need to post transactions immediately after signing.
<code class="language-plaintext highlighter-rouge">signAndPostTxns</code> allows this goal without revealing the signed transactions to the DApp, which prevents surprises to the user: there is no risk the DApp keeps in memory the transactions and post it later without the user knowing it (either to achieve a malicious goal such as forcing double spending, or just because the DApp has a bug).
However, there are cases where <code class="language-plaintext highlighter-rouge">signTxns</code> and <code class="language-plaintext highlighter-rouge">postTxns</code> need to be used: for example when multiple users need to coordinate to sign an atomic transfer.</p>
  
    <h2 id="sample-usage">
      
      
        <a href="#sample-usage" class="anchor-link"></a> Sample usage
      
      
    </h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">(</span><span class="nx">wallet</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Account discovery</span>
  <span class="kd">const</span> <span class="nx">enabled</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">enable</span><span class="p">({</span><span class="na">network</span><span class="p">:</span> <span class="dl">'</span><span class="s1">testnet-v1.0</span><span class="dl">'</span><span class="p">});</span>
  <span class="kd">const</span> <span class="k">from</span> <span class="o">=</span> <span class="nx">enabled</span><span class="p">.</span><span class="nx">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

  <span class="c1">// Querying</span>
  <span class="kd">const</span> <span class="nx">algodv2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">algosdk</span><span class="p">.</span><span class="nx">Algodv2</span><span class="p">(</span><span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">getAlgodv2</span><span class="p">());</span>
  <span class="kd">const</span> <span class="nx">suggestedParams</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">algodv2</span><span class="p">.</span><span class="nx">getTransactionParams</span><span class="p">().</span><span class="k">do</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">txns</span> <span class="o">=</span> <span class="nx">makeTxns</span><span class="p">(</span><span class="k">from</span><span class="p">,</span> <span class="nx">suggestedParams</span><span class="p">);</span>

  <span class="c1">// Sign and post</span>
  <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">wallet</span><span class="p">.</span><span class="nx">signAndPost</span><span class="p">(</span><span class="nx">txns</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>

<span class="p">};</span>
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">makeTxns</code> is comparable to what is seen in <a href="/ARCs/arc-0001">ARC-0001</a>’s sample code.</p>
  
    <h2 id="copyright">
      
      
        <a href="#copyright" class="anchor-link"></a> Copyright
      
      
    </h2>

<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p>

  <h2>Citation</h2>
  <p>Please cite this document as:</p>
  
  <p>, "ARC-10: Algorand Wallet Reach Minimum Requirements [DRAFT]," <em>Ethereum Improvement Proposals</em>, no. 10, . [Online serial]. Available: https://algorandfoundation.github.io/ARCS/arc-10.</p>
</div>

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "TechArticle",
    "headline": "ARC-10: Algorand Wallet Reach Minimum Requirements [DRAFT]",
    "author": "",
    "name": "ARC-10: Algorand Wallet Reach Minimum Requirements [DRAFT]",
    "dateCreated": "",
    "datePublished": "",
    
    "inLanguage": "en-US",
    "license": "#copyright",
    "copyrightYear": ""
  }
</script>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Algorand Requests for Comments</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Algorand Requests for Comments</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/algorandfoundation/ARCs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">algorandfoundation/ARCs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>To discuss ARC drafts, use the corresponding issue in the issue tracker.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
